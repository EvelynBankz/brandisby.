<!-- FIXED & CLEANED thankyou.html (Spinner color #f7dad9) -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Thank You - Fleur De Vie</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    /* Spinner overlay */
    #fleur-overlay {
      position: fixed;
      inset: 0;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #f7dad9;
      backdrop-filter: blur(6px);
      transition: opacity 0.45s ease;
    }
    .spinner {
      width: 64px;
      height: 64px;
      border-radius: 50%;
      border: 5px solid rgba(17, 46, 31, 0.2);
      border-top-color: #112e1f;
      animation: spin 1s linear infinite;
    }
    @keyframes spin { to { transform: rotate(360deg); } }
  </style>
</head>

<body>
  <div id="fleur-overlay"><div class="spinner"></div></div>

  <!-- Replace with your actual logo path -->
  <img src="logo.png" alt="Fleur De Vie Logo" style="margin:40px auto;display:block;width:120px;" />

  <h1>Thank You</h1>
  <p>Your order is being processed...</p>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-app.js";
    import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/10.3.1/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCuiZXHFYl1fVKnGwojavRvbekSBpkipJg",
      authDomain: "brandisby.firebaseapp.com",
      projectId: "brandisby",
      storageBucket: "brandisby.firebasestorage.app",
      messagingSenderId: "87213267039",
      appId: "1:87213267039:web:339e9fd49e3ad31f7423ea"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    async function loadOrder() {
      try {
        const params = new URLSearchParams(window.location.search);
        const orderId = params.get("orderId");
        if (!orderId) throw new Error("No order ID in URL");

        const docRef = doc(db, "brands", "fleurdevie", "orders", orderId);
        const docSnap = await getDoc(docRef);

        if (docSnap.exists()) {
          console.log("Order found:", docSnap.data());
          document.querySelector("h1").textContent = "Thank You!";
          document.querySelector("p").textContent = "Your order has been received successfully.";
        } else {
          document.querySelector("p").textContent = "We could not find your order.";
        }
      } catch (err) {
        console.error(err);
        document.querySelector("p").textContent = "An error occurred loading your order.";
      } finally {
        // fade out the overlay
        const overlay = document.getElementById("fleur-overlay");
        overlay.style.opacity = "0";
        setTimeout(() => overlay.remove(), 500);
      }
    }

    document.addEventListener("DOMContentLoaded", loadOrder);
  </script>
</body>
</html>
