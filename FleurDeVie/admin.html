<!DOCTYPE html> <html lang="en"> <head> <meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <title>Fleur De Vie Admin Dashboard</title> <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet"> <style> * { box-sizing:border-box; margin:0; padding:0; } body { font-family: "Montserrat", sans-serif; background:#F5E6CC; color:#112e1f; line-height:1.6; } a { text-decoration:none; color:inherit; } header { background:#112e1f; color:#FFD6BA; padding:16px; text-align:center; font-family:"Playfair Display", serif; font-size:24px; font-weight:700; } .container { max-width:1000px; margin:2rem auto; padding:2rem; background:#FFD6BA; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.1); } h2 { font-family:"Playfair Display", serif; margin-bottom:16px; color:#112e1f; } label { display:block; margin-top:1rem; font-weight:500; } input, textarea, select { width:100%; padding:0.6rem; margin-top:0.5rem; border:1px solid #112e1f; border-radius:6px; font-size:1rem; } button { margin-top:1rem; padding:0.75rem 1.2rem; background:#112e1f; color:#FFD6BA; border:none; border-radius:6px; cursor:pointer; font-weight:600; transition:0.3s; } button:hover { background:#0a1d14; } .message { margin-top:1rem; font-weight:500; font-size:1rem; text-align:center; } table { width:100%; border-collapse:collapse; margin-top:1.5rem; background:#fff; border-radius:12px; overflow:hidden; } th, td { padding:0.75rem; border-bottom:1px solid #ddd; text-align:left; font-size:0.95rem; } th { background:#F5E6CC; font-family:"Playfair Display", serif; color:#112e1f; } td img { width:60px; border-radius:6px; } .actions button { margin-right:0.5rem; padding:0.4rem 0.6rem; font-size:0.9rem; } .actions button:hover { opacity:0.85; } /* Dashboard Navigation */ .dashboard-nav { display:flex; gap:10px; margin-bottom:1.5rem; } .dashboard-nav button { flex:1; } .section { display:none; margin-top:1rem; } .section.active { display:block; } @media(max-width:600px){ .container { padding:1rem; } table, th, td { font-size:0.85rem; } th, td { padding:0.5rem; } .dashboard-nav { flex-direction:column; } } </style> </head> <body> <header>Fleur De Vie Admin Dashboard</header> <!-- LOGIN FORM --> <div class="container" id="loginContainer"> <h2>Admin Login</h2> <form id="loginForm"> <label for="loginEmail">Email</label> <input type="email" id="loginEmail" required> <label for="loginPassword">Password</label> <input type="password" id="loginPassword" required> <button type="submit">Login</button> <div class="message" id="loginMessage"></div> </form> </div> <!-- DASHBOARD --> <div class="container" id="dashboardContainer" style="display:none;"> <div class="dashboard-nav"> <button type="button" data-target="productsSection">ðŸ“¦ Products</button> <button type="button" data-target="quotesSection">ðŸ’³ Quotes</button> </div> <!-- PRODUCTS SECTION --> <div class="section" id="productsSection"> <h2>Manage Products</h2> <form id="productForm"> <input type="hidden" id="productId"> <label for="name">Product Name</label> <input type="text" id="name" required> <label for="description">Description</label> <textarea id="description" required></textarea> <label for="price">Price (NGN)</label> <input type="number" id="price" step="0.01" required> <label for="imageUrl">Image URL</label> <input type="url" id="imageUrl" placeholder="https://example.com/image.jpg" required> <label for="published">Published</label> <select id="published"> <option value="true">Yes</option> <option value="false">No</option> </select> <button type="submit">Save Product</button> <div class="message" id="message"></div> </form> <!-- Products Table --> <h2>All Products</h2> <table> <thead> <tr> <th>Image</th> <th>Name</th> <th>Price</th> <th>Description</th> <th>Published</th> <th>Actions</th> </tr> </thead> <tbody id="productsBody"></tbody> </table> </div> <!-- QUOTES SECTION --> <div class="section" id="quotesSection"> <h2>Generate Quote</h2> <form id="quoteForm"> <label for="customerName">Customer Name</label> <input type="text" id="customerName" required> <label for="customerEmail">Customer Email</label> <input type="email" id="customerEmail" required> <label for="quoteItems">Quote Items (JSON format)</label> <textarea id="quoteItems" placeholder='[{"name":"Rose Bouquet","price":2500,"qty":2}]' required></textarea> <button type="submit">Generate Quote</button> <div class="message" id="quoteMessage"></div> </form> <!-- Quotes Table --> <h2>All Quotes</h2> <table> <thead> <tr> <th>Customer</th> <th>Email</th> <th>Items</th> <th>Total</th> <th>Date</th> </tr> </thead> <tbody id="quotesBody"></tbody> </table> </div> </div> <!-- Firebase SDKs --> <script type="module"> import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js"; import { getAuth, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js"; import { getFirestore, collection, addDoc, doc, updateDoc, deleteDoc, onSnapshot, serverTimestamp, query, orderBy } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js"; const firebaseConfig = { apiKey: "AIzaSyCuiZXHFYl1fVKnGwojavRvbekSBpkipJg", authDomain: "brandisby.firebaseapp.com", projectId: "brandisby", storageBucket: "brandisby.firebasestorage.app", messagingSenderId: "87213267039", appId: "1:87213267039:web:339e9fd49e3ad31f7423ea" }; const app = initializeApp(firebaseConfig); const auth = getAuth(app); const db = getFirestore(app); // Admin emails const allowedAdmins = ["yourstruly.fleurdevie@gmail.com"]; const loginForm = document.getElementById("loginForm"); const loginMessage = document.getElementById("loginMessage"); const loginContainer = document.getElementById("loginContainer"); const dashboardContainer = document.getElementById("dashboardContainer"); loginForm.addEventListener("submit", async (e) => { e.preventDefault(); const email = document.getElementById("loginEmail").value; const password = document.getElementById("loginPassword").value; try { const userCredential = await signInWithEmailAndPassword(auth, email, password); const user = userCredential.user; if (allowedAdmins.includes(user.email)) { loginMessage.textContent = "âœ… Login successful!"; loginMessage.style.color = "green"; loginContainer.style.display = "none"; dashboardContainer.style.display = "block"; showSection("productsSection"); loadProducts(); loadQuotes(); } else { loginMessage.textContent = "âŒ Not authorized."; loginMessage.style.color = "red"; await signOut(auth); } } catch (err) { console.error(err); loginMessage.textContent = âŒ ${err.code}: ${err.message}; loginMessage.style.color = "red"; } }); onAuthStateChanged(auth, user => { if(user && allowedAdmins.includes(user.email)) { loginContainer.style.display = "none"; dashboardContainer.style.display = "block"; showSection("productsSection"); loadProducts(); loadQuotes(); } else { loginContainer.style.display = "block"; dashboardContainer.style.display = "none"; } }); // Section toggle document.querySelectorAll(".dashboard-nav button").forEach(btn=>{ btn.addEventListener("click", ()=>{ showSection(btn.dataset.target); }); }); function showSection(id){ document.querySelectorAll(".section").forEach(s=>s.classList.remove("active")); document.getElementById(id).classList.add("active"); } // === PRODUCTS === const form = document.getElementById('productForm'); const message = document.getElementById('message'); const productsBody = document.getElementById('productsBody'); const productIdInput = document.getElementById('productId'); form.addEventListener('submit', async (e) => { e.preventDefault(); const id = productIdInput.value; const product = { name: document.getElementById('name').value, description: document.getElementById('description').value, price: parseFloat(document.getElementById('price').value), imageUrl: document.getElementById('imageUrl').value, published: document.getElementById('published').value === "true", updatedAt: serverTimestamp() }; try { if(id) { const docRef = doc(db, "brands", "fleurdevie", "products", id); await updateDoc(docRef, product); message.textContent = "âœ… Product updated!"; } else { const productsCol = collection(db, "brands", "fleurdevie", "products"); product.createdAt = serverTimestamp(); await addDoc(productsCol, product); message.textContent = "âœ… Product added!"; } message.style.color = "green"; form.reset(); productIdInput.value = ""; } catch(err) { console.error(err); message.textContent = "âŒ Error saving product."; message.style.color = "red"; } }); async function loadProducts() { const productsCol = collection(db, "brands", "fleurdevie", "products"); const q = query(productsCol, orderBy("createdAt", "desc")); onSnapshot(q, snapshot => { productsBody.innerHTML = ""; snapshot.forEach(docSnap => { const p = docSnap.data(); const tr = document.createElement("tr"); tr.innerHTML = <td><img src="${p.imageUrl}" alt="${p.name}"></td> <td>${p.name}</td> <td>â‚¦${p.price.toFixed(2)}</td> <td>${p.description}</td> <td>${p.published ? "Yes" : "No"}</td> <td class="actions"> <button onclick="editProduct('${docSnap.id}', '${p.name}', '${p.description}', ${p.price}, '${p.imageUrl}', ${p.published})">Edit</button> <button onclick="deleteProduct('${docSnap.id}')">Delete</button> </td> ; productsBody.appendChild(tr); }); }); } window.editProduct = (id, name, description, price, imageUrl, published) => { productIdInput.value = id; document.getElementById('name').value = name; document.getElementById('description').value = description; document.getElementById('price').value = price; document.getElementById('imageUrl').value = imageUrl; document.getElementById('published').value = published ? "true" : "false"; message.textContent = "âœï¸ Editing product..."; message.style.color = "blue"; }; window.deleteProduct = async (id) => { if(confirm("Are you sure you want to delete this product?")) { const docRef = doc(db, "brands", "fleurdevie", "products", id); await deleteDoc(docRef); } }; // === QUOTES === const quoteForm = document.getElementById("quoteForm"); const quoteMessage = document.getElementById("quoteMessage"); const quotesBody = document.getElementById("quotesBody"); quoteForm.addEventListener("submit", async (e)=>{ e.preventDefault(); try{ const items = JSON.parse(document.getElementById("quoteItems").value); const total = items.reduce((sum,i)=>sum+i.price*i.qty,0); const quote = { customerName: document.getElementById("customerName").value, customerEmail: document.getElementById("customerEmail").value, items, total, createdAt: serverTimestamp() }; const quotesCol = collection(db, "brands", "fleurdevie", "quotes"); await addDoc(quotesCol, quote); quoteMessage.textContent = "âœ… Quote generated!"; quoteMessage.style.color = "green"; quoteForm.reset(); } catch(err){ console.error(err); quoteMessage.textContent = "âŒ Error generating quote."; quoteMessage.style.color = "red"; } }); async function loadQuotes() { const quotesCol = collection(db, "brands", "fleurdevie", "quotes"); const q = query(quotesCol, orderBy("createdAt", "desc")); onSnapshot(q, snapshot=>{ quotesBody.innerHTML = ""; snapshot.forEach(docSnap=>{ const qd = docSnap.data(); const tr = document.createElement("tr"); tr.innerHTML = <td>${qd.customerName}</td> <td>${qd.customerEmail}</td> <td>${qd.items.map(i=>${i.name} x${i.qty}).join(", ")}</td> <td>â‚¦${qd.total.toFixed(2)}</td> <td>${qd.createdAt?.toDate().toLocaleString() || ""}</td> ; quotesBody.appendChild(tr); }); }); } </script> </body> </html>
