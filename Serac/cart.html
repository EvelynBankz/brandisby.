<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sérac - Cart</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500&family=Playfair+Display:wght@400;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* RESET & BASE */
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:"Montserrat", sans-serif; background:#141517; color:#fff; line-height:1.6; }
a { text-decoration:none; color:inherit; transition:color 0.3s ease; }
h1,h2,h3 { font-family:"Playfair Display", serif; }

/* HEADER */
.site-header { background:#141517; color:#fff; display:flex; justify-content:space-between; align-items:center; padding:16px 28px; position:fixed; top:0; left:0; right:0; z-index:1000; border-bottom:1px solid rgba(255,255,255,0.1); }
.header-left { display:flex; align-items:center; gap:12px; }
.brand-logo { height:60px; }
.brand-title { font-family:"Playfair Display", serif; font-size:24px; font-weight:700; color:#B66E41; letter-spacing:1px; }
.header-right { display:flex; gap:20px; align-items:center; }
.header-right a { font-weight:500; color:#fff; position:relative; }
.header-right a::after { content:""; position:absolute; left:0; bottom:-4px; width:0; height:2px; background:#B66E41; transition:width 0.3s; }
.header-right a:hover::after { width:100%; }
.cart-count { background:#B66E41; color:#141517; font-size:12px; font-weight:600; border-radius:50%; padding:2px 6px; margin-left:4px; transition:transform 0.3s; }
.cart-count:hover { transform:scale(1.1); }
.hamburger { display:none; background:none; border:none; cursor:pointer; width:30px; height:24px; position:relative; }
.hamburger span { display:block; width:100%; height:3px; background:#fff; border-radius:2px; position:absolute; left:0; transition:0.3s; }
.hamburger span:nth-child(1){ top:0; }
.hamburger span:nth-child(2){ top:10px; }
.hamburger span:nth-child(3){ top:20px; }
.hamburger.open span:nth-child(1){ transform:rotate(45deg); top:10px; background:#B66E41; }
.hamburger.open span:nth-child(2){ opacity:0; }
.hamburger.open span:nth-child(3){ transform:rotate(-45deg); top:10px; background:#B66E41; }

/* HERO */
.hero { position:relative; height:90vh; display:flex; justify-content:center; align-items:center; text-align:center; margin-top:80px; overflow:hidden; }
.hero::after { content:""; position:absolute; inset:0; background:url('asset/bg25.jpg') center/cover no-repeat; transform:scale(1.1); z-index:-1; border-radius:12px; box-shadow:inset 0 0 0 2000px rgba(20,21,23,0.6); }
.hero-text { position:relative; color:#B66E41; }
.hero-text h1 { font-size:clamp(36px,5vw,64px); margin-bottom:12px; }
.hero-text p { font-size:clamp(16px,2vw,24px); max-width:700px; }

/* CART */
section.cart { padding:60px 20px; background:#141517; color:#fff; }
.container { max-width:1100px; margin:auto; }
h2 { text-align:center; font-size:28px; margin-bottom:20px; color:#B66E41; }
.currency-selector { text-align:right; margin-bottom:10px; }
.currency-selector select { padding:5px 10px; border-radius:6px; border:1px solid #4B4E54; background:#141517; color:#fff; }
.cart-grid { display:flex; flex-direction:column; gap:20px; }
.cart-item { background:#1E1F22; padding:16px; border-radius:12px; display:flex; flex-direction:column; gap:12px; box-shadow:0 4px 12px rgba(0,0,0,0.4); transition:transform 0.3s ease; }
.cart-item:hover { transform:translateY(-4px); }
.cart-item-header { display:flex; align-items:center; gap:16px; }
.cart-item-header img { width:120px; height:120px; object-fit:cover; border-radius:8px; }
.cart-item-details { flex:1; display:flex; flex-direction:column; }
.cart-item-details h3 { margin-bottom:6px; color:#fff; }
.variant-summary { font-size:0.95rem; color:#ccc; margin-bottom:6px; }
.price { font-weight:600; margin-bottom:8px; color:#B66E41; }
.quantity-controls { display:flex; align-items:center; gap:6px; margin-bottom:8px; flex-wrap:wrap; }
.quantity-controls button { background:#B66E41; color:#141517; border:none; border-radius:6px; padding:4px 10px; cursor:pointer; font-weight:600; transition:background 0.3s, transform 0.3s; }
.quantity-controls button:hover { background:#d98c5b; transform:scale(1.05); }
.quantity-controls input { width:50px; text-align:center; padding:4px; border-radius:6px; border:1px solid #4B4E54; background:#141517; color:#fff; }

/* Show Variants Button */
.show-variants-btn { background:#141517; color:#B66E41; border:1px solid #B66E41; border-radius:6px; padding:4px 8px; cursor:pointer; font-weight:600; margin-top:6px; font-size:14px; transition:all 0.3s; }
.show-variants-btn:hover { background:#B66E41; color:#141517; }

.variants-container { display:none; flex-direction:column; gap:8px; margin-top:8px; padding-left:8px; border-left:2px solid #4B4E54; }

/* Cart Subtotal */
.cart-subtotal { text-align:right; font-weight:600; margin-top:10px; color:#B66E41; }
.cart-empty { text-align:center; font-size:18px; margin-top:20px; color:#aaa; display:none; }
.cart-buttons { margin-top:20px; display:flex; justify-content:flex-end; gap:10px; }
.cart-buttons a { padding:10px 20px; border-radius:6px; font-weight:600; transition:all 0.3s; display:inline-block; }
.cart-buttons .continue-btn { background:#4B4E54; color:#fff; }
.cart-buttons .continue-btn:hover { background:#5f626a; }
.cart-buttons .checkout-btn { background:#B66E41; color:#141517; }
.cart-buttons .checkout-btn:hover { background:#d98c5b; }

/* FOOTER */
footer { text-align:center; padding:20px; background:#141517; color:#777; margin-top:60px; border-top:1px solid rgba(255,255,255,0.1); }
footer p span { color:#B66E41; }

/* MOBILE */
@media (max-width:600px){
  .header-right { display:none; flex-direction:column; background:#141517; position:absolute; top:70px; right:0; width:200px; padding:20px; border-left:1px solid rgba(255,255,255,0.1); }
  .header-right.open { display:flex; }
  .hamburger { display:block; }
  .cart-item-header img { width:80px; height:80px; }
  .quantity-controls button, .quantity-controls input { font-size:14px; padding:4px 6px; }
  .hero { height:40vh; margin-top:80px; }
  .hero::after { transform:scale(1.05); }
  .hero-text h1 { font-size:clamp(28px,5vw,48px); }
  .hero-text p { font-size:clamp(14px,2vw,18px); max-width:90%; }
}
</style>
</head>
<body>

<header class="site-header">
  <div class="header-left">
    <img src="logo.png" alt="Sérac Logo" class="brand-logo">
    <div class="brand-title">SÉRAC</div>
  </div>
  <nav class="header-right">
    <a href="index.html">Home</a>
    <a href="shop.html">Shop</a>
    <a href="about.html">About</a>
    <a href="cart.html">Cart <span class="cart-count" id="cartCount">0</span></a>
    <a href="customization.html">Customize</a>
    <a href="contact.html">Contact</a>
  </nav>
  <button class="hamburger" id="hamburger"><span></span><span></span><span></span></button>
</header>

<section class="hero">
  <div class="hero-text">
    <h1>Your Cart</h1>
    <p>Review your items before checkout</p>
  </div>
</section>

<section class="cart">
  <div class="container">
    <h2>Shopping Cart</h2>
    <div class="currency-selector">
      <label for="currency">Currency: </label>
      <select id="currency">
        <option value="NGN">NGN</option>
        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
        <option value="GBP">GBP</option>
      </select>
    </div>
    <div class="cart-grid" id="cartGrid"></div>
    <div class="cart-empty" id="cartEmpty">Your cart is empty.</div>
    <div class="cart-subtotal" id="cartSubtotal"></div>
    <div class="cart-buttons">
      <a href="shop.html" class="continue-btn">Continue Shopping</a>
      <a href="checkout/index.html" class="checkout-btn" id="checkoutBtn">Proceed to Checkout</a>
    </div>
  </div>
</section>

<footer>
  <p>© 2025 <span>SÉRAC</span></p>
</footer>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCuiZXHFYl1fVKnGwojavRvbekSBpkipJg",
  authDomain: "brandisby.firebaseapp.com",
  projectId: "brandisby",
  storageBucket: "brandisby.firebasestorage.app",
  messagingSenderId: "87213267039",
  appId: "1:87213267039:web:339e9fd49e3ad31f7423ea"
};
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

const cartGrid = document.getElementById('cartGrid');
const cartEmpty = document.getElementById('cartEmpty');
const cartCountElem = document.getElementById('cartCount');
const cartSubtotalElem = document.getElementById('cartSubtotal');
const checkoutBtn = document.getElementById('checkoutBtn');
const currencySelect = document.getElementById('currency');

let cart = JSON.parse(localStorage.getItem('cart')) || [];

if(localStorage.getItem('currency')) currencySelect.value = localStorage.getItem('currency');

function formatPrice(value, currency){
  const localeMap = { USD:'en-US', EUR:'de-DE', GBP:'en-GB', NGN:'en-NG' };
  const minFrac = currency === 'NGN' ? 0 : 2;
  return new Intl.NumberFormat(localeMap[currency] || 'en-US', { style:'currency', currency, minimumFractionDigits:minFrac }).format(Number(value||0));
}

function mergeCartItems(cartArray){
  const merged = [];
  cartArray.forEach(item=>{
    const idx = merged.findIndex(i => i.id === item.id && (i.color||'')=== (item.color||'') && (i.size||'')=== (item.size||''));
    if(idx===-1) merged.push({...item});
    else merged[idx].quantity = (merged[idx].quantity||0) + (item.quantity||0);
  });
  return merged;
}

function totalQuantityByProduct(productId){
  return cart.filter(i=>i.id===productId).reduce((sum,i)=>sum+(i.quantity||0),0);
}

function groupVariants(productId){
  return cart.filter(i=>i.id===productId);
}

async function fetchProductData(productId){
  try{
    const dref = doc(db,"brands","serac","products",productId);
    const snap = await getDoc(dref);
    if(snap.exists()) return snap.data();
  }catch(e){ console.warn("Fetch product failed", productId, e); }
  return null;
}

// ... keep rest of renderCart and event handling same as original
</script>
</body>
</html>
